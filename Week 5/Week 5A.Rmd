---
title: "Week 5A"
author: "James Chun"
date: "2025-09-27"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Tidying and Transforming Data

# Install Packages

```{r}
library(glue)
library(tidyverse)
library(dplyr)
```



## Recreate Given Data
Data was recreated directly in excel. Then it was read into R and tidied

```{r}
flight_data <- read.csv("flight_data.csv")


# remove third row 
flight_data <- flight_data[-3,]

# Adjust column names 
colnames(flight_data)[c(1,2)] <- c("Airlines", "Status")

# Fill in missing data
flight_data$Airlines[c(2,4)] <- c('Alaska', 'AM West')
```


# Data Analysis

Compare respective percentages for on time and delayed flights for the two airlines across all 5 cities
```{r}
ala_total <- sum(flight_data[c(1,2),3:7])
am_total <- sum(flight_data[c(3,4),3:7])

#repetitive code
ala_avg_delay <- (sum(flight_data[2,3:7]) / ala_total * 100) %>%
  round(2) %>%
  paste("%")
am_avg_delay <- (sum(flight_data[4,3:7]) / am_total * 100) %>%
  round(2) %>%
  paste("%")

# On time averages
ala_avg_ont <- (sum(flight_data[1,3:7]) / ala_total * 100) %>%
  round(2) %>%
  paste("%")
am_avg_ont <- (sum(flight_data[3,3:7]) / am_total* 100) %>%
  round(2) %>%
  paste("%")

com_percents <- data.frame(Alaska = c(ala_avg_delay, ala_avg_ont),
                           AM.West = c(am_avg_delay, am_avg_ont))

rownames(com_percents) <- c("Delayed", "On Time")

com_percents
```

On average, Alaska has more delays and AM West has more on time flights


Comparing percentages by each city
```{r}
  ala_city_del <- (as.numeric(flight_data[2,3:7]) / ala_total * 100) %>%
  round(2) %>%
  paste("%")
ala_city_ont <- (as.numeric(flight_data[1,3:7]) / ala_total * 100) %>%
  round(2) %>%
  paste("%")

am_city_del <- (as.numeric(flight_data[4,3:7]) / am_total * 100) %>%
  round(2) %>%
  paste("%")
am_city_ont <- (as.numeric(flight_data[3,3:7]) / am_total * 100) %>%
  round(2) %>%
  paste("%")

city_percents <- data.frame(Alaska.On.Time = ala_city_ont,
                            Alaska.Delayed = ala_city_del,
                            AM.West.On.Time = am_city_ont,
                            AM.West.Delayed = am_city_del)

rownames(city_percents) <- c("Los Angeles", "Phoenix", "San Diego", "San Francisco", "Seatle")

city_percents
```
We can see that out of the on time flights for Alaska came from Seattle, which makes sense given their geographic proximity. The On time flights for AM West came mostly from Phoenix. Compared to their overall flight percentages, this does show in greater detail which specific cities contribute the most to the airline's performance. If Alaksa is only on time for Seattle, then you would not want to rely on them for any other city, despite their overall on time percentage being 86%.
